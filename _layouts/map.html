---
layout: default
---
<a class="muted small" href="/">{{ site.title | escape }}</a>

<script src="https://openlayers.org/en/v6.0.1/build/ol.js"></script>

<main>

{{ content }}

    <h1>{{ page.list_title }}</h1>

    <div id="map" class="map" style="height: 500px; width: 100%;"></div>
    <script>
      var vectorLayer = new ol.layer.Vector({
        source: new ol.source.Vector({
          url: '/assets/maps/Twin_Peaks_Mt_Sutro.gpx',
          format: new ol.format.GPX()
      });

      var vectorLayer = new ol.layer.Vector({
        source: vectorSource,
        style: new ol.style.Style({
          stroke: new ol.style.Stroke({
            color: 'red',
            width: 3
          })
        })
      });

      var map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          }),
          vectorLayer
        ]
      });

      vectorSource.on('change', function() {
        if (vectorSource.getState() === 'ready') {
          var extent = vectorSource.getExtent();
          var center = ol.extent.getCenter(extent);
          var size = map.getSize();
          var view = new ol.View({
            center: center,
            zoom: Math.max(Math.min(map.getView().getZoom() || 10,
                ol.animation.zoom({ resolution: ol.extent.getHeight(extent) / size[1], duration: 250 })),
              map.getView().getMinZoom()),
            maxZoom: 18,
            minZoom: 1
          });
          map.setView(view);
        }
      });
    </script>

{%- include footer.html -%}
</main>
